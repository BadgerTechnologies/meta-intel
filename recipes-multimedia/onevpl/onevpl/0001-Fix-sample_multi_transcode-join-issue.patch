From 607535701900cb0d46354d70e2cfceb1986e7051 Mon Sep 17 00:00:00 2001
From: "Park, Seunghyuk H" <seunghyuk.h.park@intel.com>
Date: Sat, 17 Jul 2021 10:37:08 -0700
Subject: [PATCH] Fix sample_multi_transcode join issue

Upstream-Status: Backport
inner-source #157fadd2f

---
 .../sample_multi_transcode/src/pipeline_transcode.cpp       | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/tools/legacy/sample_multi_transcode/src/pipeline_transcode.cpp b/tools/legacy/sample_multi_transcode/src/pipeline_transcode.cpp
index fee3b9e0..50a000d0 100644
--- a/tools/legacy/sample_multi_transcode/src/pipeline_transcode.cpp
+++ b/tools/legacy/sample_multi_transcode/src/pipeline_transcode.cpp
@@ -342,14 +342,14 @@ mfxStatus CTranscodingPipeline::DecodePreInit(sInputParams *pParams) {
             MSDK_CHECK_STATUS(sts, "InitDecMfxParams failed");
         }
     }
-#if !defined(MFX_ONEVPL)
     else {
-        m_mfxDecParams         = m_pParentPipeline->GetDecodeParam(TargetID);
+        m_mfxDecParams = m_pParentPipeline->GetDecodeParam(TargetID);
+#if !defined(MFX_ONEVPL)
         auto mvc               = m_mfxDecParams.AddExtBuffer<mfxExtMVCSeqDesc>();
         *mvc                   = m_pParentPipeline->GetDecMVCSeqDesc();
         m_bOwnMVCSeqDescMemory = false;
-    }
 #endif
+    }
 
     if (pParams->nFPS) {
         this->m_nReqFrameTime = 1000000 / pParams->nFPS;
-- 
2.32.0

