From 3d3c03d947394696565b3bb7bed8c900de057a28 Mon Sep 17 00:00:00 2001
From: WU CHIA CHUAN <chia.chuan.wu@intel.com>
Date: Thu, 2 Jul 2015 15:59:18 +0800
Subject: [PATCH] dpdk enable VHOST and ip_fragmentation in common_linuxapp config

Introduce CONFIG_VHOST_ENABLED for package config selection purpose in
building vhost feature.

Upstream-Status: Inappropriate [configuration]

Signed-off-by: WU CHIA CHUAN <chia.chuan.wu@intel.com>
---
 config/common_linuxapp |   11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

diff --git a/config/common_linuxapp b/config/common_linuxapp
index 0b25f34..000f950 100644
--- a/config/common_linuxapp
+++ b/config/common_linuxapp
@@ -406,19 +406,24 @@ CONFIG_RTE_LIBRTE_PIPELINE=y
 CONFIG_RTE_LIBRTE_KNI=y
 CONFIG_RTE_KNI_PREEMPT_DEFAULT=y
 CONFIG_RTE_KNI_KO_DEBUG=n
-CONFIG_RTE_KNI_VHOST=n
+CONFIG_RTE_KNI_VHOST=$(CONFIG_VHOST_ENABLED)
 CONFIG_RTE_KNI_VHOST_MAX_CACHE_SIZE=1024
-CONFIG_RTE_KNI_VHOST_VNET_HDR_EN=n
+CONFIG_RTE_KNI_VHOST_VNET_HDR_EN=$(CONFIG_VHOST_ENABLED)
 CONFIG_RTE_KNI_VHOST_DEBUG_RX=n
 CONFIG_RTE_KNI_VHOST_DEBUG_TX=n
 
 #
+# Compile ip_fragmentation
+#
+CONFIG_RTE_IP_FRAG=y
+
+#
 # Compile vhost library
 # fuse-devel is needed to run vhost-cuse.
 # fuse-devel enables user space char driver development
 # vhost-user is turned on by default.
 #
-CONFIG_RTE_LIBRTE_VHOST=n
+CONFIG_RTE_LIBRTE_VHOST=$(CONFIG_VHOST_ENABLED)
 CONFIG_RTE_LIBRTE_VHOST_USER=y
 CONFIG_RTE_LIBRTE_VHOST_DEBUG=n
 
-- 
1.7.9.5

